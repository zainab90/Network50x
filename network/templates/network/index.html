{% extends "network/layout.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block body %}
 {% if user.is_authenticated %}
    <div class="col-md-12 mt-3">
        <div class="card bg-form">
            <div class="card-header">
New Post
            </div>
            <div class="card-body">
                  <form action="{% url 'index' %}" method="post">
                {% csrf_token %}
                {{ PostForm|crispy }}
                <button class="btn btn-primary " type="submit">Post </button>
            </form>
            </div>
        </div>
    </div>
{% endif %}
{% if post_list %}



{% for item in post_list%}
<div class="col-md-12 mt-3">
    <div class="card">
                  <div class="card-header d-flex justify-content-between">
                     <div class="d-flex align-items-center">


        <span class="avatar" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user-circle" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ff9300" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <circle cx="12" cy="12" r="9" />
  <circle cx="12" cy="10" r="3" />
  <path d="M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855" />
</svg>
                                </span>
         <div class="d-none d-xl-block ps-2">

                  <div>  <a href="{% url 'view-profile' item.user.id %}">{{item.user.username}}</a> </div>

 </div>
     </div>
                      {% if item.user.username == request.user.username %}
                    <div class="card-actions">
                      <a href="#" class="" data-id="{{item.id}}">
<svg xmlns="http://www.w3.org/2000/svg" class="icon" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <desc>Download more icon variants from https://tabler-icons.io/i/pencil</desc>
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4"></path>
   <line x1="13.5" y1="6.5" x2="17.5" y2="10.5"></line>
</svg>
                       Edit
                      </a>
                    </div>
                      {% else %}
                      <div class="card-actions"></div>
                      {% endif %}
                  </div>
                  <div class="card-body">
                <div id="{{item.id}}{{'div'}}" >
                            <p class="text-muted" id="{{item.id}}{{'p'}}">{{item.post_body}}</p>
                <p class="text-muted" id="{{item.id}}{{'d'}}">{{item.date}}</p>
                      </div>


                         <form action="{% url 'Edit-post' item.id %}" method="post" style="display:{{disp_EditForm}}" id="{{item.id}}{{'form'}}">
                        <textarea class="form-control" id="{{item.id}}{{'textarea'}}" placeholder="Post">{{item.post_body}}</textarea>
 <div class="form-group py-2">
                  <input type="submit" class="btn btn-primary" value="Save"/>
            </div>
            </form>

            </div>
        <div class="card-footer">
 <div>
 {% if user.is_authenticated %}
     <button   class="btn btn-sm btn-outline-primary" id="{{item.id}}">
<!--         <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="lightgrey" fill="none" stroke-linecap="round" stroke-linejoin="round">-->
<!--   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>-->
<!--   <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"></path>-->
<!--</svg>-->
         like
                      </button>
     {% else %}
          <button disabled class="btn btn-sm btn-outline-primary" >
<!--         <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="lightgrey" fill="none" stroke-linecap="round" stroke-linejoin="round">-->
<!--   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>-->
<!--   <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"></path>-->
<!--</svg>-->
         like
                      </button>
{% endif %}


    <p style="display:inline;" id="{{item.id}}{{'likes'}}"> {{item.likes}}</p>
 </div>
                  </div>
                </div>
</div>
{% endfor %}

<!--add paginator tabs-->
<div class="col-md-12 mt-1">
    {% if post_list.has_other_pages %}
  <ul class="pagination justify-content-end">
    {% if post_list.has_previous %}

      <li class="page-item"><a class="page-link" href="?page={{ post_list.previous_page_number }}">Previous</a></li>
    {% else %}

    <li class="page-item disabled"><span class="page-link">Previous</span></li>

    {% endif %}

    {% for i in post_list.paginator.page_range %}
      {% if post_list.number == i %}
        <li class="page-item active"><span class="page-link">{{ i }} <span class="sr-only">(current)</span></span></li>
      {% else %}
        <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
      {% endif %}
    {% endfor %}

    {% if post_list.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ post_list.next_page_number }}">Next</a></li>
    {% else %}
      <li class="page-item disabled"><span class="page-link">Next</span></li>
    {% endif %}
  </ul>
{% endif %}
</div>


{% else %}
<div class="col-md-12 mt-3">
    <div class="card">
                  <div class="card-body">
                 <p class="text-muted">there are no Post found!!</p>

            </div>

                </div>
</div>

{% endif%}


{% endblock %}

{% block script %}
    <script src="{% static 'network/index.js' %}"></script>
{% endblock %}